<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Subscription - Pandemic Detection System</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/subscription.css">
</head>
<body>
    <header class="site-header">
        <div class="header-inner">
            <a class="brand" href="index.html" aria-label="Pandemic Detection Home">Pandemic Detection</a>
            <nav id="mainNav" class="main-nav" role="navigation" aria-label="Main menu">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="ai_detection.html">AI Detection</a></li>
                    <li><a href="dashboard.html">Dashboard</a></li>
                    <li><a href="subscription.html" class="active">Subscription</a></li>
                    <li><a href="admin.html">Admin</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="subscription-container" role="main">
        <header class="page-header">
            <h1>Subscription plans</h1>
        </header>

        <section class="plans card" aria-labelledby="plans-title">
            <h2 id="plans-title" class="sr-only">Plans</h2>
            <div class="plan-grid">
                <article class="plan">
                    <h3>Basic</h3>
                    <p class="price"><strong>$9.99</strong><span>/month</span></p>
                    <ul class="plan-features">
                        <li>Limited AI Detection</li>
                        <li>Monthly Health Reports</li>
                        <li>Email support</li>
                    </ul>
                    <button class="btn select-plan" data-plan="basic" data-price="9.99" aria-label="Select Basic plan">Select Basic</button>
                </article>

                <article class="plan featured">
                    <div class="badge">Popular</div>
                    <h3>Premium</h3>
                    <p class="price"><strong>$19.99</strong><span>/month</span></p>
                    <ul class="plan-features">
                        <li>Full AI Detection</li>
                        <li>Real-time Alerts</li>
                        <li>Priority consultations</li>
                    </ul>
                    <button class="btn primary select-plan" data-plan="premium" data-price="19.99" aria-label="Select Premium plan">Select Premium</button>
                </article>
            </div>
        </section>

        <section class="subscription-form card" aria-labelledby="subscribe-title">
            <h2 id="subscribe-title">Subscribe</h2>
            <form id="subscriptionForm" novalidate>
                <label for="name">Full name</label>
                <input id="name" name="name" type="text" placeholder="Your full name" required>

                <label for="email">Email</label>
                <input id="email" name="email" type="email" placeholder="you@example.com" required>

                <label for="planSelect">Plan</label>
                <select id="planSelect" name="plan" required>
                    <option value="basic">Basic — $9.99/month</option>
                    <option value="premium">Premium — $19.99/month</option>
                </select>

                <div class="form-actions">
                    <button type="submit" class="btn primary">Subscribe</button>
                    <button type="button" id="resetBtn" class="btn ghost">Reset</button>
                </div>

                <p id="formMessage" class="muted small" aria-live="polite"></p>
            </form>
        </section>
    </main>

    <footer class="site-footer" role="contentinfo">
        <p>&copy; <span id="year"></span> Pandemic Detection System</p>
    </footer>

    <!-- Confirmation modal (mock payment flow) -->
    <div id="confirmModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
        <div class="modal-card">
            <h3 id="confirmTitle">Confirm subscription</h3>
            <p id="confirmText"></p>
            <div class="modal-actions">
                <button id="confirmBtn" class="btn primary">Confirm</button>
                <button id="cancelBtn" class="btn ghost">Cancel</button>
            </div>
        </div>
    </div>

    <script>
    (function(){
        // small behaviors: year, form handling, mock confirmation
        document.getElementById('year').textContent = new Date().getFullYear();

        const planButtons = document.querySelectorAll('.select-plan');
        const planSelect = document.getElementById('planSelect');
        planButtons.forEach(btn => btn.addEventListener('click', () => {
            const p = btn.dataset.plan;
            planSelect.value = p;
            document.getElementById('formMessage').textContent = `Selected ${p} plan. Complete form to subscribe.`;
            planSelect.focus();
        }));

        const form = document.getElementById('subscriptionForm');
        const modal = document.getElementById('confirmModal');
        const confirmText = document.getElementById('confirmText');
        const confirmBtn = document.getElementById('confirmBtn');
        const cancelBtn = document.getElementById('cancelBtn');
        const resetBtn = document.getElementById('resetBtn');

        function openModal(text){
            confirmText.textContent = text;
            modal.classList.remove('hidden');
            modal.setAttribute('aria-hidden','false');
            confirmBtn.focus();
        }
        function closeModal(){
            modal.classList.add('hidden');
            modal.setAttribute('aria-hidden','true');
        }

        form.addEventListener('submit', function(e){
            e.preventDefault();
            const name = form.name.value.trim();
            const email = form.email.value.trim();
            const plan = form.plan.value;
            if(!name || !email){
                document.getElementById('formMessage').textContent = 'Please fill in your name and a valid email.';
                return;
            }
            openModal(`Name: ${name}\nEmail: ${email}\nPlan: ${plan}\n\nThis is a demo confirmation (no real payment).`);
        });

        confirmBtn.addEventListener('click', function(){
            closeModal();
            document.getElementById('formMessage').textContent = 'Subscription successful — welcome!';
            form.reset();
        });
        cancelBtn.addEventListener('click', closeModal);
        resetBtn.addEventListener('click', function(){ form.reset(); document.getElementById('formMessage').textContent=''; });
    })();
    </script>
</body>
</html>
